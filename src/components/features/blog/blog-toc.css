.toc {
  position: fixed;
  top: 50vh;
  right: max(1.25rem, 8vw);
  width: min(17.5rem, 18vw);
  border-radius: 0.75rem;
  padding: var(--spacing-md);
  backdrop-filter: blur(0.5rem) saturate(180%);
  border: 1px solid rgb(255 255 255 / 20%);
  max-height: calc(100vh - 6.25rem);
  overflow-y: auto;
  z-index: 100;
  opacity: 0%;
}

/* GSAPでアニメーションを制御するため、CSSアニメーションクラスは削除 */

.toc-title {
  font-weight: 800;
  font-size: 0.875rem;
  color: #111827;
  letter-spacing: 0.02em;
  margin-bottom: var(--spacing-sm);
}

.toc-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0.375rem;
}

.toc > .toc-list > li {
  position: relative;
  padding-left: 1.375rem;
}

.toc > .toc-list > li::before {
  content: "";
  position: absolute;
  left: 0.5625rem;
  top: 0.5em;
  width: 0.5rem;
  height: 0.5rem;
  background: rgb(17 24 39 / 20%);
  border-radius: 999px;
  transform: translate(-50%, -50%);
  transition:
    background 0.2s ease,
    box-shadow 0.2s ease;
}

.toc__link--h1 {
  font-weight: 700;
  color: var(--color-muted);
  font-size: 15px;
  text-decoration: none;
  transition: color 0.18s ease;
}

.toc__link--h1.toc__link--active {
  color: #111827;
  font-weight: 800;
}

.toc__link--h1.toc__link--active::before {
  content: "";
  position: absolute;
  left: 0.5625rem;
  top: 0.5em;
  width: 0.5rem;
  height: 0.5rem;
  background: #111827;
  border-radius: 999px;
  transform: translate(-50%, -50%);
  box-shadow:
    0 0 0 0.25rem rgb(17 24 39 / 8%),
    0 0.25rem 0.875rem rgb(0 0 0 / 12%);
}

.toc-h2-list {
  list-style: none;
  margin: var(--spacing-sm) 0 0 var(--spacing-sm);
  padding-left: 1.25rem;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  border-left: 2px solid #e5e7eb;
}

.toc__item--h2 {
  position: relative;
  padding-left: 0;
}

.toc__item--h2::before {
  display: none;
}

.toc__link--h2 {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
  line-height: 1.5;
  color: var(--color-muted);
  font-weight: 600;
  font-size: 0.875rem;
  text-decoration: none;
  padding-left: 0.75rem;
  position: relative;
}

.toc__link--h2::before {
  display: none;
}

.toc__link--h2.toc__link--active {
  color: #111827;
  font-weight: 700;
}

@media (width <= 64rem) {
  .toc {
    display: none;
  }
}

@media (width >= 68.8125rem) and (width <= 75rem) {
  .toc {
    width: min(15rem, 18vw);
  }
}

@media (width >= 75.0625rem) and (width <= 87.4375rem) {
  .toc {
    width: min(16.25rem, 18vw);
  }
}

@media (width >= 87.5rem) {
  .toc {
    width: min(17.5rem, 18vw);
  }
}

@media (width >= 100rem) {
  .toc {
    width: min(18.75rem, 18vw);
  }
}
