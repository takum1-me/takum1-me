.toc {
  position: fixed;
  top: 50vh;
  right: max(1.25rem, 8vw);
  width: min(17.5rem, 18vw);
  border-radius: 0.75rem;
  padding: var(--spacing-md);
  backdrop-filter: blur(0.5rem) saturate(180%);
  -webkit-backdrop-filter: blur(0.5rem) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.2);
  max-height: calc(100vh - 6.25rem);
  overflow-y: auto;
  z-index: 100;
  opacity: 0;
}

/* GSAPでアニメーションを制御するため、CSSアニメーションクラスは削除 */

.toc-title {
  font-weight: 800;
  font-size: 0.875rem;
  color: #111827;
  letter-spacing: 0.02em;
  margin-bottom: var(--spacing-sm);
}

.toc-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0.375rem;
}

.toc > .toc-list > li {
  position: relative;
  padding-left: 1.375rem;
}

.toc > .toc-list > li::before {
  content: "";
  position: absolute;
  left: 0.5625rem;
  top: 0.5em;
  width: 0.5rem;
  height: 0.5rem;
  background: rgba(17, 24, 39, 0.2);
  border-radius: 999px;
  transform: translate(-50%, -50%);
  transition:
    background 0.2s ease,
    box-shadow 0.2s ease;
}

.toc > .toc-list > li > a.is-active-link {
  color: #111827;
  font-weight: 800;
}

.toc > .toc-list > li > a.is-active-link::before {
  content: "";
  position: absolute;
  left: 0.5625rem;
  top: 0.5em;
  width: 0.5rem;
  height: 0.5rem;
  background: #111827;
  border-radius: 999px;
  transform: translate(-50%, -50%);
  box-shadow:
    0 0 0 0.25rem rgba(17, 24, 39, 0.08),
    0 0.25rem 0.875rem rgba(0, 0, 0, 0.12);
}

.toc > .toc-list > li > a {
  font-weight: 700;
  color: var(--muted);
  font-size: 15px;
  text-decoration: none;
  transition: color 0.18s ease;
}

.toc .toc-list li .toc-h2-list {
  list-style: none;
  margin: var(--spacing-sm) 0 0 var(--spacing-sm);
  padding-left: 1.25rem;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  border-left: 2px solid #e5e7eb;
}

.toc .toc-list li .toc-h2-list li {
  position: relative;
  padding-left: 0;
}

.toc .toc-list li .toc-h2-list li::before {
  display: none;
}

.toc .toc-list li .toc-h2-list a {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
  line-height: 1.5;
  color: var(--muted);
  font-weight: 600;
  font-size: 0.875rem;
  text-decoration: none;
  padding-left: 0.75rem;
  position: relative;
}

.toc .toc-list li .toc-h2-list a::before {
  display: none;
}

.toc .toc-list li .toc-h2-list a.is-active-link {
  color: #111827;
  font-weight: 700;
}

@media (max-width: 64rem) {
  .toc {
    display: none;
  }
}

@media (min-width: 68.8125rem) and (max-width: 75rem) {
  .toc {
    width: min(15rem, 18vw);
  }
}

@media (min-width: 75.0625rem) and (max-width: 87.4375rem) {
  .toc {
    width: min(16.25rem, 18vw);
  }
}

@media (min-width: 87.5rem) {
  .toc {
    width: min(17.5rem, 18vw);
  }
}

@media (min-width: 100rem) {
  .toc {
    width: min(18.75rem, 18vw);
  }
}
